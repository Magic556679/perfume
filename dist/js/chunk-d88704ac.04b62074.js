(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d88704ac"],{"1dde":function(t,e,c){var o=c("d039"),n=c("b622"),a=c("2d00"),r=n("species");t.exports=function(t){return a>=51||!o((function(){var e=[],c=e.constructor={};return c[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},3321:function(t,e,c){},"395d":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n={id:"carts"},a=Object(o["createStaticVNode"])('<header><div class="container h-100"><div class="row align-items-center justify-content-center h-100"><div class="col-md-6 col-12"><div class="headerTitle"><h1 class="text-center">購物車</h1></div></div></div></div></header>',1),r={key:0,class:"container min mt-5"},i={key:0,class:"row justify-content-center"},d={class:"col-md-8"},l={class:"d-flex justify-content-between"},s={class:"table align-middle text-center mt-5"},u=Object(o["createVNode"])("thead",null,[Object(o["createVNode"])("tr",null,[Object(o["createVNode"])("th",{class:"d-none d-lg-table-cell"}),Object(o["createVNode"])("th",null,"品名"),Object(o["createVNode"])("th",{width:"130px"},"數量"),Object(o["createVNode"])("th",null,"金額"),Object(o["createVNode"])("th",null,"刪除")])],-1),b={class:"d-none d-lg-table-cell"},p={class:"input-group my-3 bg-secondary rounded"},h={class:"input-group-prepend"},j=Object(o["createVNode"])("i",{class:"bi bi-plus-lg"},null,-1),f={class:"input-group-append"},O=Object(o["createVNode"])("i",{class:"bi bi-dash-lg"},null,-1),N={class:""},g=Object(o["createVNode"])("i",{class:"bi bi-trash"},null,-1),v=Object(o["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),m=Object(o["createVNode"])("td",{class:"d-none d-lg-table-cell"},null,-1),V={class:"text-end"},y={key:0},k=Object(o["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),x=Object(o["createVNode"])("td",{class:"d-none d-lg-table-cell"},null,-1),w={class:"text-end\n                              text-success"},C={class:"input-group"},B={class:"input-group-prepend"},$={key:1,class:"row d-flex align-items-center justify-content-center"},D={class:"col-md-8 text-center"},L=Object(o["createVNode"])("h2",null,"購物車無商品",-1);function T(t,e,c,T,q,S){var z=Object(o["resolveComponent"])("Loading");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(z,{active:q.isLoading,"z-index":1060},null,8,["active"]),Object(o["createVNode"])("div",n,[a,q.cart.carts?(Object(o["openBlock"])(),Object(o["createBlock"])("div",r,[q.cart.carts.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])("div",i,[Object(o["createVNode"])("div",d,[Object(o["createVNode"])("div",l,[Object(o["createVNode"])("button",{type:"button",class:"\n                    btn-pink rounded py-2 shadow-none",style:{border:"none"},onClick:e[1]||(e[1]=function(e){return t.$router.push("/products")})},"繼續購物"),Object(o["createVNode"])("button",{type:"button",class:"\n                    btn-pink rounded py-2 shadow-none",style:{border:"none"},onClick:e[2]||(e[2]=function(e){return t.$router.push("/order")})},"填寫訂單")]),Object(o["createVNode"])("table",s,[u,Object(o["createVNode"])("tbody",null,[q.cart.carts?(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(q.cart.carts,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("tr",{key:e.id},[Object(o["createVNode"])("td",b,[Object(o["createVNode"])("img",{src:e.product.imageUrl},null,8,["src"])]),Object(o["createVNode"])("td",null,Object(o["toDisplayString"])(e.product.title),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("div",p,[Object(o["createVNode"])("div",h,[Object(o["createVNode"])("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",onClick:function(t){return S.upDateCart(e.id,e.qty+1)}},[j],8,["onClick"])]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control border-0 text-center\n                                my-auto shadow-none bg-light",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1","onUpdate:modelValue":function(t){return e.qty=t},disabled:"value"},null,8,["onUpdate:modelValue"]),[[o["vModelText"],e.qty]]),Object(o["createVNode"])("div",f,[Object(o["createVNode"])("button",{class:"btn btn-outline-dark border-0 py-2",type:"button",onClick:function(t){return S.upDateCart(e.id,e.qty-1)},disabled:1===e.qty},[O],8,["onClick","disabled"])])])]),Object(o["createVNode"])("td",N," NT$"+Object(o["toDisplayString"])(t.$toCurrency(e.final_total)),1),Object(o["createVNode"])("td",null,[Object(o["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return S.removeCartItem(e.id)}},[g],8,["onClick"])])])})),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("tr",null,[v,m,Object(o["createVNode"])("td",V,"$NT"+Object(o["toDisplayString"])(t.$toCurrency(q.cart.total)),1)]),q.cart.final_total!==q.cart.total?(Object(o["openBlock"])(),Object(o["createBlock"])("tr",y,[k,x,Object(o["createVNode"])("td",w,"$NT"+Object(o["toDisplayString"])(t.$toCurrency(q.cart.final_total)),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])("div",C,[Object(o["createVNode"])("div",B,[Object(o["createVNode"])("button",{class:"input-group-text btn-pink",id:"btnGroupAddon2",onClick:e[3]||(e[3]=function(t){return S.coupon()})},"套用優惠券")]),Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",class:"form-control",placeholder:"輸入優惠卷","aria-label":"Input group example","aria-describedby":"btnGroupAddon2","onUpdate:modelValue":e[4]||(e[4]=function(t){return q.couponNum.code=t})},null,512),[[o["vModelText"],q.couponNum.code]])])])])):(Object(o["openBlock"])(),Object(o["createBlock"])("div",$,[Object(o["createVNode"])("div",D,[L,Object(o["createVNode"])("button",{type:"button",class:"\n              btn-pink rounded py-2 px-3 shadow-none mt-5",style:{border:"none"},onClick:e[5]||(e[5]=function(e){return t.$router.push("/products")})},"前往購物")])]))])):Object(o["createCommentVNode"])("",!0)])],64)}c("99af");var q=c("e4f3"),S={data:function(){return{cart:{},isLoading:!1,couponNum:{code:""}}},methods:{getCarts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("wu9zo4s","/cart");this.isLoading=!0,this.$http.get(e).then((function(e){t.cart=e.data.data,t.isLoading=!1}))},removeCartItem:function(t){var e=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("wu9zo4s","/cart/").concat(t);this.$http.delete(c).then((function(t){q["a"].emit("update-cart"),console.log(t),e.getCarts(),e.isLoading=!1}))},upDateCart:function(t,e){var c=this,o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("wu9zo4s","/cart/").concat(t),n={product_id:t,qty:e};this.$http.put(o,{data:n}).then((function(t){console.log(t),c.getCarts()}))},coupon:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("wu9zo4s","/coupon");this.$http.post(e,{data:this.couponNum}).then((function(e){console.log(e),e.data.success?t.$swal({title:e.data.message,icon:"success",showConfirmButton:!1,timer:2e3}):t.$swal({title:e.data.message,text:"請至首頁領取",icon:"error",showConfirmButton:!0,timer:1e4}),t.getCarts()}))}},mounted:function(){this.getCarts()}};c("4568");S.render=T;e["default"]=S},4568:function(t,e,c){"use strict";c("3321")},8418:function(t,e,c){"use strict";var o=c("c04e"),n=c("9bf2"),a=c("5c6c");t.exports=function(t,e,c){var r=o(e);r in t?n.f(t,r,a(0,c)):t[r]=c}},"99af":function(t,e,c){"use strict";var o=c("23e7"),n=c("d039"),a=c("e8b5"),r=c("861d"),i=c("7b0b"),d=c("50c4"),l=c("8418"),s=c("65f0"),u=c("1dde"),b=c("b622"),p=c("2d00"),h=b("isConcatSpreadable"),j=9007199254740991,f="Maximum allowed index exceeded",O=p>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),N=u("concat"),g=function(t){if(!r(t))return!1;var e=t[h];return void 0!==e?!!e:a(t)},v=!O||!N;o({target:"Array",proto:!0,forced:v},{concat:function(t){var e,c,o,n,a,r=i(this),u=s(r,0),b=0;for(e=-1,o=arguments.length;e<o;e++)if(a=-1===e?r:arguments[e],g(a)){if(n=d(a.length),b+n>j)throw TypeError(f);for(c=0;c<n;c++,b++)c in a&&l(u,b,a[c])}else{if(b>=j)throw TypeError(f);l(u,b++,a)}return u.length=b,u}})},e4f3:function(t,e,c){"use strict";var o=function(t){return{all:t=t||new Map,on:function(e,c){var o=t.get(e);o?o.push(c):t.set(e,[c])},off:function(e,c){var o=t.get(e);o&&(c?o.splice(o.indexOf(c)>>>0,1):t.set(e,[]))},emit:function(e,c){var o=t.get(e);o&&o.slice().map((function(t){t(c)})),(o=t.get("*"))&&o.slice().map((function(t){t(e,c)}))}}},n=o();e["a"]=n}}]);
//# sourceMappingURL=chunk-d88704ac.04b62074.js.map